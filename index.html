<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TimeAtlas</title>
  <link href="https://fonts.googleapis.com/css2?family=Arial&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body id="body">
  <div class="container">
    <h1>TimeAtlas</h1>

    <select id="continent" class="select-bar">
      <option value="">Kıta Seçiniz</option>
      <option value="asia">Asya</option>
      <option value="europe">Avrupa</option>
      <option value="south-america">Güney Amerika</option>
      <option value="north-america">Kuzey Amerika</option>
      <option value="africa">Afrika</option>
      <option value="oceania">Okyanusya</option>
    </select>

    <select id="country" class="select-bar hidden">
      <option value="">Ülke Seçiniz</option>
    </select>

    <div id="city-container" class="hidden">
      <select id="city" class="select-bar">
        <option value="">Şehir Seçiniz</option>
      </select>
    </div>

    <div id="time-display"></div>
    <div id="icon" class="icon"></div>
  </div>

  <footer>
    MIT Lisansı – Mustidevelope © All Rights Reserved 2025
  </footer>

  <script>
    const continentSelect = document.getElementById("continent");
    const countrySelect = document.getElementById("country");
    const citySelect = document.getElementById("city");
    const cityContainer = document.getElementById("city-container");
    const timeDisplay = document.getElementById("time-display");
    const icon = document.getElementById("icon");
    const body = document.getElementById("body");

    const data = {
      asia: {
        tr: ["Europe/Istanbul"],
        jp: ["Asia/Tokyo"],
        cn: ["Asia/Shanghai"],
        kr: ["Asia/Seoul"],
        in: ["Asia/Kolkata"],
        sa: ["Asia/Riyadh"],
        id: ["Asia/Jakarta"]
      },
      europe: {
        de: ["Europe/Berlin"],
        fr: ["Europe/Paris"],
        gb: ["Europe/London"],
        it: ["Europe/Rome"],
        es: ["Europe/Madrid"],
        ru: ["Europe/Moscow"]
      },
      "south-america": {
        br: ["America/Sao_Paulo"],
        ar: ["America/Argentina/Buenos_Aires"],
        co: ["America/Bogota"]
      },
      "north-america": {
        us: ["America/New_York", "America/Chicago", "America/Denver", "America/Los_Angeles"],
        ca: ["America/Toronto", "America/Vancouver"],
        mx: ["America/Mexico_City"]
      },
      africa: {
        eg: ["Africa/Cairo"],
        za: ["Africa/Johannesburg"],
        ng: ["Africa/Lagos"]
      },
      oceania: {
        au: ["Australia/Sydney", "Australia/Perth"]
      }
    };

    let currentTimeZone = null;

    continentSelect.addEventListener("change", () => {
      const selectedContinent = continentSelect.value;
      countrySelect.innerHTML = '<option value="">Ülke Seçiniz</option>';
      citySelect.innerHTML = '<option value="">Şehir Seçiniz</option>';
      cityContainer.classList.add("hidden");
      timeDisplay.textContent = "";
      icon.innerHTML = "";

      if (data[selectedContinent]) {
        Object.keys(data[selectedContinent]).forEach(countryCode => {
          const option = document.createElement("option");
          option.value = countryCode;
          option.textContent = countryCode.toUpperCase();
          countrySelect.appendChild(option);
        });
        countrySelect.classList.remove("hidden");
      } else {
        countrySelect.classList.add("hidden");
      }
    });

    countrySelect.addEventListener("change", () => {
      const selectedContinent = continentSelect.value;
      const selectedCountry = countrySelect.value;
      citySelect.innerHTML = '<option value="">Şehir Seçiniz</option>';

      if (data[selectedContinent] && data[selectedContinent][selectedCountry]) {
        const tzs = [...new Set(data[selectedContinent][selectedCountry])];
        tzs.forEach(tz => {
          const option = document.createElement("option");
          option.value = tz;
          option.textContent = tz.split("/")[1].replace(/_/g, " ");
          citySelect.appendChild(option);
        });
        cityContainer.classList.remove("hidden");
      } else {
        cityContainer.classList.add("hidden");
        timeDisplay.textContent = "";
        icon.innerHTML = "";
      }
    });

    citySelect.addEventListener("change", () => {
      currentTimeZone = citySelect.value;
      updateTime();
    });

    function updateTime() {
      if (!currentTimeZone) return;
      const now = new Date();
      const timeString = now.toLocaleTimeString("tr-TR", {
        timeZone: currentTimeZone,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
      timeDisplay.textContent = `Saat (${currentTimeZone.split("/")[1]}): ${timeString}`;
      const hourStr = now.toLocaleTimeString("en-US", { hour: '2-digit', hour12: false, timeZone: currentTimeZone });
      updateTheme(hourStr);
    }

    function updateTheme(hourStr) {
      const hour = parseInt(hourStr);
      if (hour >= 6 && hour < 18) {
        body.classList.remove("night");
        body.classList.add("day");
        icon.innerHTML = "☀️";
      } else {
        body.classList.remove("day");
        body.classList.add("night");
        icon.innerHTML = "🌙";
      }
    }

    setInterval(updateTime, 1000);
  </script>
</body>
</html>
